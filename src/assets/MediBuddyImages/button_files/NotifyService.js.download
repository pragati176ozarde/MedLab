!function(){"use strict";define(["angular"],function(e){var t=e.module("marketPlace.notifyService",[]);t.factory("notify",["$timeout","$http","$compile","$templateCache","$rootScope",function(t,n,l,a,o){var c="templates/notifyTemplate.html?"+timeStamp,s=10,i=15,r=5e3,d="center",m=document.body,p=0,u=[],f=[],$={},v=function(b){v.closeAll(),"object"!=typeof b&&(b={message:b}),b.duration=b.duration?b.duration:r,b.templateUrl=b.templateUrl?b.templateUrl:c,b.container=b.container?b.container:m,b.classes=b.classes?b.classes:"";var g=b.scope?b.scope.$new():o.$new();if(g.$position=b.position?b.position:d,g.$message=b.message,g.$classes=b.classes,g.$messageTemplate=b.messageTemplate,p>0)for(var C=f.length+1-p,h=0;h<C;h++)f[h].$close();return n.get(b.templateUrl,{cache:a}).success(function(n){var a=l(n)(g);if(b.messageTemplate){for(var o,c=0;c<a.children().length;c++)if(e.element(a.children()[c]).hasClass("notify-message-template")){o=e.element(a.children()[c]);break}if(!o)throw new Error("notify could not find the .notify-message-template element in "+b.templateUrl+".");o.append(l(b.messageTemplate)(g))}e.element(b.container).append(a),u.push(a),"center"===g.$position&&t(function(){g.$centerMargin="-"+a[0].offsetWidth/2+"px"}),g.$close=function(){a.css("display","none").attr("data-closing","true"),r()};var r=function(){for(var e=0,t=s,n=u.length-1;n>=0;n--){var l=10,a=u[n],o=a[0].offsetHeight,c=t+o+l;a.attr("data-closing")?c+=20:t+=o+i,a.css("top",c+"px").css("margin-top","-"+(o+l)+"px").css("visibility","visible"),e++}};t(function(){r()}),b.duration>0&&t(function(){g.$close()},b.duration)}).error(function(e){throw new Error("Template specified for Notify ("+b.templateUrl+") could not be loaded. "+e)}),$.close=function(){g.$close&&g.$close()},f.push(g),$};return v.config=function(t){s=e.isUndefined(t.startTop)?s:t.startTop,i=e.isUndefined(t.verticalSpacing)?i:t.verticalSpacing,r=e.isUndefined(t.duration)?r:t.duration,c=t.templateUrl?t.templateUrl:c,d=e.isUndefined(t.position)?d:t.position,m=t.container?t.container:m,p=t.maximumOpen?t.maximumOpen:p},v.closeAll=function(){for(var e=u.length-1;e>=0;e--){var t=u[e];t.css("display","none")}},v}]),t.factory("dialogService",["$document","$compile","$rootScope","$controller","$timeout","$sce","$state","authService","$window","apiProvider",function(t,n,l,a,o,c,s,i,r,d){var m={id:null,template:null,templateUrl:null,title:"Default Title",backdrop:!0,success:{label:"OK",fn:null},cancel:{label:"Close",fn:null},controller:null,backdropClass:"modal-backdrop",backdropCancel:!0,footerTemplate:null,modalClass:"silbar",css:{top:"100px",left:"30%",margin:"0 auto"}},p=t.find("body");return function(t,c,s){e.isObject(t)?(s=c,c=t):c.templateUrl=t,c=e.extend({},m,c);var i,r=(c.id?' id="'+c.id+'" ':"",'<button class="btn" ng-click="$modalCancel()">{{$modalCancelLabel}}</button><button class="btn btn-primary" ng-click="$modalSuccess()">{{$modalSuccessLabel}}</button>'),d=('<div class="modal-footer">'+(c.footerTemplate||r)+"</div>",function(){return c.template?e.isString(c.template)?'<div class="">'+c.template+"</div>":'<div class="">'+c.template.html()+"</div>":'<div class="" ng-include="\''+c.templateUrl+"'\"></div>"}());l.$on("closeBookPayPopup",function(){h.$modalCancel()});var u=e.element('<div class="slideBox"><div class="slideContent">'+d+"</div></div>");for(i in c.css)u.css(i,c.css[i]);var f="<div ";c.backdropCancel&&(f+='ng-click="$modalCancel()"'),f+=">";var $=e.element(f);$.addClass(c.backdropClass),$.addClass("fade in");var v=function(e){27===e.keyCode&&h.$modalCancel()},b=function(){p.unbind("keydown",v),u.remove(),c.backdrop&&($.remove(),l.$emit("dailogserviceOpen"))};p.bind("keydown",v);var g,C,h=c.scope||l.$new();h.consultationCheck=!1,h.$title=c.title,h.$modalClose=b,h.$modalCancel=function(){var e=c.cancel.fn||b;e.call(this),h.$modalClose()},h.ok=function(e){e?h.$modalSuccess():h.$modalCancel()},h.$modalSuccess=function(){var e=c.success.fn||b;e.call(this),h.$modalClose()},h.$modalSuccessLabel=c.success.label,h.$modalCancelLabel=c.cancel.label,c.controller&&(C=e.extend({$scope:h},s),g=a(c.controller,C),u.contents().data("$ngControllerController",g)),n(u)(h),n($)(h),p.append(u),c.backdrop&&(h.$emit("dailogserviceOpen"),p.append($)),o(function(){u.addClass("in")},200)}}])})}();